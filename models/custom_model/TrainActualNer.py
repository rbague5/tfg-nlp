#!/usr/bin/env python
# coding: utf8
"""Example of training an additional entity type

This script shows how to add a new entity type to an existing pretrained NER
model. To keep the example short and simple, only four sentences are provided
as examples. In practice, you'll need many more — a few hundred would be a
good start. You will also likely need to mix in examples of other entity
types, which might be obtained by running the entity recognizer over unlabelled
sentences, and adding their annotations to the training set.

The actual training is performed by looping over the examples, and calling
`nlp.entity.update()`. The `update()` method steps through the words of the
input. At each word, it makes a prediction. It then consults the annotations
provided on the GoldParse instance, to see whether it was right. If it was
wrong, it adjusts its weights so that the correct action will score higher
next time.

After training your model, you can save it to a directory. We recommend
wrapping models as Python packages, for ease of deployment.

For more details, see the documentation:
* Training: https://spacy.io/usage/training
* NER: https://spacy.io/usage/linguistic-features#named-entities

Compatible with: spaCy v2.1.0+
Last tested with: v2.1.0
"""
from __future__ import unicode_literals, print_function

from datetime import datetime

import plac
import random
from pathlib import Path
import spacy
from spacy.util import minibatch, compounding
from labeler_and_converter_of_data.ConvertSpacyTrainData import convert_data

# training data
# Note: If you're using an existing model, make sure to mix in examples of
# other entity types that spaCy correctly recognized before. Otherwise, your
# model might learn the new type, but "forget" what it previously knew.
# https://explosion.ai/blog/pseudo-rehearsal-catastrophic-forgetting
TRAIN_DATA = convert_data("../../labeler_and_converter_of_data/data_not_blank.json")

@plac.annotations(
    model=("Model name. Defaults to blank 'en' model.", "option", "m", str),
    new_model_name=("New model name for model meta.", "option", "nm", str),
    output_dir=("Optional output directory", "option", "o", Path),
    n_iter=("Number of training iterations", "option", "n", int),
)

def main(model='es_core_news_md', new_model_name="animal", output_dir="./es_core_legal_md", n_iter=100):
    """Set up the pipeline and entity recognizer, and train the new entity."""
    random.seed(0)
    if model is not None:
        nlp = spacy.load(model)  # load existing spaCy model
        print(f"Loaded model {model}")
    else:
        nlp = spacy.blank("en")  # create blank Language class
        print("Created blank 'en' model")
    # Add entity recognizer to model if it's not in the pipeline
    # nlp.create_pipe works for built-ins that are registered with spaCy
    if "ner" not in nlp.pipe_names:
        ner = nlp.create_pipe("ner")
        nlp.add_pipe(ner)
    # otherwise, get it, so we can add labels to it
    else:
        ner = nlp.get_pipe("ner")
        
    # new entity label
    LABEL = "FECHA"
    ner.add_label(LABEL)  # add new entity label to entity recognizer

    if model is None:
        print("Begin training")
        optimizer = nlp.begin_training()
    else:
        print("Resume training")
        optimizer = nlp.resume_training()
    move_names = list(ner.move_names)

    print(f"Move names: {move_names}")
    # get names of other pipes to disable them during training
    pipe_exceptions = ["ner", "trf_wordpiecer", "trf_tok2vec"]
    other_pipes = [pipe for pipe in nlp.pipe_names if pipe not in pipe_exceptions]
    print(f"Other pipes: {other_pipes}")

    with nlp.disable_pipes(*other_pipes):  # only train NER
        enabled_pipes = nlp.pipe_names
        print(f"Enabled pipes: {enabled_pipes}")
        sizes = compounding(1.0, 4.0, 1.001)

        configuration = nlp.entity.cfg
        print(f"configuration: {configuration}")

        total_loses = list()
        total_iterations = list()

        # batch up the examples using spaCy's minibatch
        for itn in range(n_iter):
            total_iterations.append(itn)
            now = datetime.now()
            print(f"[{now.strftime('%H:%M:%S')}] Starting iteration " + str(itn) + "/" + str(n_iter))

            random.shuffle(TRAIN_DATA)
            # Batches es tot el train data
            batches = minibatch(TRAIN_DATA, size=sizes)
            # print(f"          Batches: {batches}")
            losses = {}
            for batch in batches:
                # print(f"                    Actual Batch: {batch}")
                texts, annotations = zip(*batch)
                # print(f"texts: {texts}")
                # print(f"annotations: {annotations}")
                nlp.update(texts, annotations, sgd=optimizer, drop=0.20, losses=losses)
            print(f"          Losses {losses}")
            total_loses.append(losses)

            print(f"Total Iterations: {total_iterations}")
            print(f"Total Losses: {total_loses}")
            print()
        print("[")
        for x,y in zip(total_iterations, total_loses):
            print("{'iteration':"+str(x)+","+str(y)[1:]+",")
        print("]")

    # test the trained model
    test_text = "Roj: STS 539/2019 - ECLI: ES:TS:2019:539 UNIFICACIÓN DOCTRINA núm.: 1193/2017 Ponente: Excmo. Sr. D. Fernando Salinas Molina Letrada de la Administración de Justicia: Ilma. Sra. Dña. María Jesús Escudero Cinca TRIBUNAL SUPREMO Sala de lo Social PLENO Sentencia núm. 59/2019 Excmos. Sres. y Excmas. Sras. D. Jesus Gullon Rodriguez, presidente D. Fernando Salinas Molina Dª. Maria Milagros Calvo Ibarlucea Dª. Maria Luisa Segoviano Astaburuaga D. Jose Manuel Lopez Garcia de la Serrana Dª. Rosa Maria Viroles Piñol Dª. Maria Lourdes Arastey Sahun D. Miguel Angel Luelmo Millan D. Antonio V. Sempere Navarro D. Angel Blasco Pellicer D. Sebastian Moralo Gallego Dª. Maria Luz Garcia Paredes Dª. Concepcion Rosario Ureste Garcia En Madrid, a 28 de enero de 2019. Esta Sala ha visto el recurso de casación para la uniﬁcación de doctrina interpuesto por D. Clemente , representado y asistido por el letrado D. José Gabriel Sánchez Torregrosa, contra la sentencia dictada el 14 de marzo de 2016 por la Sala de lo Social del Tribunal Superior de Justicia de Murcia, en recurso de suplicación nº 384/2015 , interpuesto contra la sentencia de fecha 30 de enero de 2015, dictada por el Juzgado de lo Social nº 2 de Cartagena , en autos nº 635/2014, seguidos a instancia de D. Clemente contra la Universidad Politécnica de Cartagena (UPCT). Ha comparecido en concepto de recurrido la Universidad Politécnica de Cartagena (UPCT), representada por el procurador D. Juan Carlos Gálvez Hermoso de Mendoza. Ha sido ponente el Excmo. Sr. D. Fernando Salinas Molina. ANTECEDENTES DE HECHO PRIMERO.- Con fecha 30 de enero de 2015, el Juzgado de lo Social nº 2 de Cartagena, dictó sentencia en la que consta la siguiente parte dispositiva: Que estimo en la petición subsidiaria la demanda formulada por Clemente frente a la UNIVERSIDAD POLITÉCNICA DE CARTAGENA -UPCT-, y del que es también participe el MINISTERIO FISCAL, por DESPIDO con VULNERACIÓN DE DERECHOS FUNDAMENTALES, y al respecto hago los siguientes pronunciamientos: 1°) Declaro que el despido del demandante, producido el 15 de septiembre de 2014, constituye despido improcedente. 2°) Condeno a UNIVERSIDAD POLITÉCNICA DE CARTAGENA a que, a su elección, opte por abonar al actor indemnización por importe de 12.633,21 euros con convalidación del acto extintivo a 15-09-2014, o readmitirle en su puesto de trabajo en las mismas condiciones que reglan antes del despido. Tal opción deberá ejercitarse ante este Juzgado en los cinco días siguientes a la notiﬁcación de la presente sentencia, entendiendo que, de no hacerlo, se opta por la readmisión. 3°) Condeno igualmente a la citada Universidad a que, en caso de readmisión laboral, abone salarios de tramitación, por importe de 24,77 euros diarios hasta tanto concurra causa de extinción legal de la relación indeﬁnida que se reconoce en este litigio. De esos salarios habrá que descontar los que hubiera podido obtener, en otras empresas en las que hubiera prestado servicios con posterioridad a su despido, siempre que aquéllos se hubieran devengado por una actividad distinta a la que compatibilizaba mientras ejerció su actividad docente universitaria (es decir, no procederá descuento alguno por mantener la actividad profesional extrauniversitaria que dio lugar a su contratación docente) y siempre también que tales salarios por nuevo trabajo distinto al que se acaba de mencionar fueran superiores a los percibidos en UNIVERSIDAD POLITÉCNICA DE CARTAGENA y así se acreditase por esta empresa, pues de otro modo el descuento sólo podrá equivaler al importe del salario mínimo interprofesional. De igual modo procederá que se descuenten de los citados salarios de tramitación que pudieran corresponder al trabajador los períodos durante los cuales hubiera podido percibir prestaciones de Seguridad Social incompatibles con aquéllos y a lo que debe estar y por ello pasar la demandada. SEGUNDO.- Que en la citada sentencia y como hechos probados se declaran los siguientes: 1°.- El demandante ha prestado servicios para la demandada UNIVERSIDAD POLITÉCNICA DE CARTAGENA, en adelante, UPCT-, sin interrupción desde el 4 de octubre de 2002, en virtud de contrato de trabajo a tiempo parcial (6 horas semanales), siendo prorrogado dicho contrato anualmente coincidiendo con los sucesivos cursos académicos y, con la categoría profesional de Profesor Asociado y percibiendo un salario mes de 743,13 euros/24,77 euros diarios con prorrata de pagas extraordinarias y siendo el centro de trabajo: la E.T.S. Ingeniería de Telecomunicación. Departamento: Tecnologías de la Información y las Comunicaciones. Área de Conocimiento: Teoría de la Señal y Comunicaciones. 2°.- El trabajador es cesado por la UPCT mediante comunicación de 9 de julio de 2014: y efectos de 15 de septiembre de 2014 - por terminación de contrato y tras haber informado no favorable para su continuidad el Consejo de Departamento. 3°.- El motivo del cese viene relacionado con el hecho de que la asignatura que el demandante creó y que ha impartido durante los últimos 11 años la da ahora Catedrático del Departamento. 4°.- El demandante no ostenta condición de representante de los trabajadores ni lo ha hecho en el año anterior al despido. 5°.- Por la parte demandante se ha agotado la vía previa administrativa adecuadamente. TERCERO.- Contra la anterior sentencia, por la representación legal de la Universidad Politécnica de Cartagena (UPCT), se formuló recurso de suplicación y la Sala de lo Social del Tribunal Superior de Justicia de Murcia, dictó sentencia en fecha 14 de marzo de 2016 , en la que consta el siguiente fallo: 'Estimar el recurso de suplicación interpuesto por la Universidad Politécnica de Cartagena, contra la sentencia número 24/2015 del Juzgado de lo Social número 2 de Cartagena, de fecha 30 de enero de 2015 , dictada en proceso número 635/2014, sobre despido, y entablado por don Clemente frente a la Universidad Politécnica de Cartagena, habiendo sido parte el Ministerio Fiscal, y revocar, como revocamos, el pronunciamiento de instancia, y, con desestimación de la demanda, se absuelve a la parte demandada de las pretensiones de la misma.'. CUARTO.- Contra la sentencia de la Sala de lo Social del Tribunal Superior de Justicia de Murcia, por la representación legal de D. Clemente , se interpuso el presente recurso de casación para la uniﬁcación de doctrina, que se formalizó mediante escrito fundado en la contradicción de la sentencia recurrida con la dictada por la Sala de lo Social del Tribunal Superior de Justicia de Madrid, de fecha 24 de octubre de 2014 (Rec. 548/2014 ). QUINTO.- Se admitió a trámite el recurso, y tras ser impugnado por la parte recurrida, se pasaron las actuaciones al Ministerio Fiscal para informe, el cual fue emitido en el sentido de considerar el recurso procedente. Se señaló para la votación y fallo el día 16 de octubre de 2018. SEXTO.- Por Providencia de 21 de noviembre de 2018 y dadas las características de la cuestión jurídica planteada y su trascendencia, se acordó su debate por la Sala en Pleno, de acuerdo con lo dispuesto en el art. 197 de la Ley Orgánica del Poder Judicial . A tal efecto se suspendió el señalamiento acordado y se ﬁjó un nuevo señalamiento para la votación y fallo para el día 16 de enero actual en Pleno, en cuya fecha tuvo lugar. FUNDAMENTOS DE DERECHO PRIMERO.- La cuestión planteada en el presente recurso de casación uniﬁcadora consiste en dilucidar si la relación profesional que ha venido discurriendo entre las partes litigantes, profesor asociado y Universidad, es indeﬁnida o de duración determinada; así como que, de ﬁgurar ser de naturaleza temporal, sí reunía los presupuestos para ello; y, ﬁnalmente, si la decisión empresarial extintiva constituye una extinción válida del vínculo laboral o un despido. SEGUNDO.- El supuesto litigioso, resuelto en la sentencia de suplicación ( STSJ/Murcia 14-03-2016 -recurso 384/2015 ), -- revocatoria de la de instancia (SJS/Cartagena nº 2 de fecha 30-01-2015 -autos 635/2014 ) --, ahora impugnada en casación uniﬁcadora por el trabajador demandante, tiene como datos esenciales los siguientes: A) El actor prestó servicios, con la categoría profesional de Profesor Asociado, para la Universidad demandada (Universidad Politécnica de Cartagena -UPCT), sin interrupción desde el 04-10-2002, en virtud de contrato de trabajo a tiempo parcial (6 horas semanales), siendo prorrogado dicho contrato anualmente coincidiendo con los sucesivos cursos académicos; en el centro de trabajo E.T.S. Ingeniería de Telecomunicación. Departamento: Tecnologías de la Información y las Comunicaciones. Área de Conocimiento: Teoría de la Señal y Comunicaciones ; fue cesado por la empleadora mediante comunicación de fecha 09-07-2014 y con efectos del día 15-09-2014, por alegada terminación de contrato y tras haber informado en el sentido de no favorable para su continuidad el Consejo de Departamento; ﬁgurando, además, expresamente como hecho declarado probado, que el motivo del cese viene relacionado con el hecho de que la asignatura que el demandante creó y que ha impartido durante los últimos 11 años la da ahora Catedrático del Departamento . B) La sentencia de instancia, rechazando la pretensión de nulidad del despido, estima en parte la demanda y declara su improcedencia, argumentando, entre otros extremos, con alegado fundamento en la doctrina de la STJUE 13-03-2014 (asunto c-190/13 ) y de la STSJ/Madrid 24-10-2014 (recurso 548/2014 ) y concluyendo que << tan amplio periodo de servicios y la uniformidad de la tarea docente impartida son claramente reveladores de que la enseñanza en esa materia constituía una necesidad permanente del citado centro universitario>> . C) La citada sentencia de instancia fue impugnada en suplicación por la Universidad empleadora, se razona por la Sala de suplicación, entre otros extremos, que el motivo del cese indudablemente viene relacionado con el hecho de que ahora la asignatura la iba a impartir el Catedrático. Se argumenta que <<... el motivo del cese fue la ﬁnalización del contrato de profesor asociado por falta de renovación del mismo ante el informe no favorable del Consejo de Departamento, pero dicho informe tiene su apoyo en que la asignatura que impartía el actor ahora la iba a impartir el Catedrático del Departamento, por lo que indudablemente el cese viene relacionado con el hecho de que ahora la asignatura la iba a impartir el Catedrático >>; que <<... el tema litigioso queda circunscrito a si el cese del actor se llevó a cabo sin causa o motivo alguno al tratarse de un contrato de trabajo de carácter indeﬁnido habida cuenta de que el actor realizaba tareas universitarias permanentes, o si, por el contrario, estamos en presencia de un contrato temporal que ﬁnaliza al no haber sido prorrogado, y así planteada la cuestión la Sala no comparte los argumentos de la sentencia recurrida en relación con el fraude de ley en la contratación, basado en la realización de actividades permanentes y la declaración del carácter indeﬁnido del vínculo contractual, como consecuencia de que el demandante desarrollaba su trabajo dentro de la actividad permanente, habitual y duradera de la Universidad, en la medida en que la docencia se impartía en asignaturas incluidas en los planes de estudios de las licenciaturas o grados >>; concluyendo que << la propia Sentencia del TJUE admite la posibilidad de utilización de este contrato para la cobertura de necesidades permanentes o recurrentes, como así ocurre habitualmente en la práctica >>; y que << se ha de tener presente que la tarea docente universitaria tiene naturaleza permanente, pero no implica que la contratación de profesores asociados de manera temporal esté reñida con la permanencia de la actividad académica, pues son las necesidades de profesorado o la carga docente las que determinan la temporalidad, por ello es posible que los Consejos de Departamento, atendidas las necesidades académicas y docentes, puedan requerir de dicha contratación o la terminación de la ya existente, necesidad objetivable por el propio Consejo, aumentando o disminuyendo la contratación de dicho tipo de profesorado temporal, lo que, en este caso, se justiﬁca, ... por el hecho de que la carga docente que tenía el actor va a ser llevada por el Catedrático del Departamento, por lo que, llegada la fecha de terminación del último contrato temporal suscrito, sin que exista prórroga o renovación del mismo, habida cuenta el informe no favorable a la prórroga por parte del Consejo de Departamento, se extingue la relación contractual, lo que no puede merecer la caliﬁcación de despido >>. TERCERO.- 1.- El trabajador recurrente en casación uniﬁcadora invoca como contradictoria, a los efectos del art. 219 LRJS , la STSJ/Madrid 24-10-2014 (recurso 548/2014 ) [alegando que su doctrina se reitera en la sentencia de la misma Sala de 12-12-2014 -recurso 713/2014 ]. Siendo dable destacar, entre otros extremos, que: A) La STSJ/Madrid 12-12-2014 (recurso 713/2014 ), ha sido la invocada como contradictoria en los recursos de casación uniﬁcadora que concluyeron con las sentencias estimatorias sobre la cuestión de fondo dictadas por esta Sala de casación en fechas 01-06-2017 (rcud 2890/2015 ) y 22-06-2017 (rcud 3047/2015 ). En dichas sentencias, y con relación especíﬁca a la sentencia del TSJ/Madrid invocada como contradictoria en dichos recursos, se argumentaba para declarar la existencia del requisito de contradicción, que << La Sala de lo Social del TSJ de Madrid razona que el dilatado período de tiempo de prestación de servicios y la uniformidad de la tarea docente desarrollada a través de variados contratos, administrativos y laborales, revela que la necesidad docente cubierta por el actor era permanente y ajena a las necesidades que cada contrato permitía cubrir, por ello entendió que la relación laboral que unía a las partes tenía carácter indeﬁnido, al no haber respetado las garantías de la normativa universitaria interpretada en la forma señalada por el TJUE en su sentencia de 13 de marzo de 2014 (asunto C-190/13 ) >>; que << Tal como reconoce el Ministerio Fiscal en su informe, la Sala entiende que concurre la contradicción exigida en los términos establecidos en el artículo 219 LRJS . En efecto, ambas sentencias contemplan reclamaciones por despido, derivadas de la extinción de un último contrato temporal, formalizadas por sendos profesores universitarios frente a sus respectivas universidades. En los dos supuestos comparados resulta que los profesores demandantes llevaban bastante tiempo prestando servicios docentes mediante varios contratos temporales previstos en la normativa universitaria que se venían sucediendo en el tiempo sucesivamente sin solución de continuidad. Igualmente, resulta que los dos profesores venían realizando las mismas funciones docentes durante el dilatado espacio de tiempo que duraba su relación, dedicación docente que en los dos supuestos comparados respondía a necesidades permanentes y estructurales de las universidades demandadas, sin que en ninguno de los casos pudiera comprobarse, de manera fehaciente que las necesidades docentes cubiertas por los profesores estuvieran relacionadas con la actividad especíﬁca que la normativa universitaria tiene establecida para cada modalidad contractual utilizada>>; que <<Ante ese similar panorama, las sentencias comparadas han llegado a resultados bien diferentes: así la sentencia recurrida entiende que la temporalidad sucesiva en las condiciones descritas no llevaría aparejada la declaración de indeﬁnición de la relación entre las partes, sino que resultaría determinante de la nulidad total del contrato del profesor habida cuenta de que ni en se génesis ni en su desarrollo se habrían cumplido las exigencias que para la modalidad contractual utilizada exige la legislación universitaria que la regula. En consecuencia desestima la demanda de despido. Por el contrario, la sentencia referencial asume que la reiteración de contratos en las mismas condiciones descritas revelan la existencia de un contrato indeﬁnido cuya extinción constituye despido que debe ser caliﬁcado como improcedente. A mayor abundamiento, para la sentencia recurrida, la actuación de la Universidad estaría amparada por la normativa comunitaria y respaldada por la doctrina contenida en la jurisprudencia comunitaria, en concreto en la STJUE de 13 de marzo de 2014 , mientras que esa misma jurisprudencia sería, para la sentencia de contraste, determinante para declarar la conducta de la Universidad demandada como ilegal >> (citada STS/IV 01-06-2017 -rcud 2890/2015 ). B) Por otra parte, y sobre esta misma cuestión relativa a la existencia o no del requisito o presupuesto de contradicción, en la también citada STS/IV 22-06-2017 (rcud 3047/2015 ), se razona, entre otros extremos, que << Entre la sentencia recurrida y la de contraste concurren las identidades exigidas por el artículo 219 de la LRJS . En efecto, en ambos supuestos se trata de reclamaciones por despido, derivadas de la extinción de un último contrato temporal, formalizadas por sendos profesores universitarios frente a la universidad en la que han venido prestando servicios, al amparo de sucesivos contratos temporales celebrados sin solución de continuidad. A lo largo de sus respectivas relaciones laborales los profesores han venido desarrollando idénticas tareas docentes, extendiéndose la prestación de servicios durante un dilatado periodo de tiempo. En los dos supuestos las tareas desempeñadas respondían a necesidades permanentes y estructurales de las respectivas universidades, sin que haya quedado acreditado que las necesidades docentes cubiertas por los profesores estuvieran relacionadas con la actividad especíﬁca que la normativa universitaria tiene establecida para cada modalidad contractual utilizada >> y se concluye que << Es irrelevante, a efectos de la contradicción, que en la sentencia recurrida se declare la nulidad del contrato por no reunir el profesor demandante el requisito de ejercer una actividad profesional ajena al ámbito universitario, extremo que no se examina en la sentencia de contraste, ya que lo relevante es que ambas sentencias analizan si las sucesivas contrataciones temporales de los profesores por la universidad tienen como consecuencia que el contrato se convierta en indeﬁnido, procediendo ambas sentencias a determinar la incidencia que en los supuestos examinados tiene la sentencia del TJUE de 13 de marzo de 2014, C-190/2013 >>. 2.- En la sentencia directamente invocada como contradictoria en el presente recurso de casación uniﬁcadora (la citada STSJ/Madrid 24-10-2014 -recurso 548/2014 ), también existe una larga serie de contratos temporales desde el año 1997 a junio de 2013 y se razona que << A través del hecho declarado probado primero queda constancia de que el Sr. ... ha venido participando en la enseñanza correspondiente a cada uno de los cursos académicos universitarios de la Universidad Complutense desarrollados entre 1997 y junio de 2013, como profesor miembro de la misma área docente (arquitectura y tecnología de computadores). Tan amplio periodo de servicios y la uniformidad de la tarea docente impartida son claramente reveladores de que la enseñanza de esa materia constituía una necesidad permanente del citado centro universitario.- En consecuencia, debe entenderse en este caso concreto que la relación laboral del recurrente no respeta las garantías de la normativa comunitaria de referencia interpretada en la forma ya señalada >>; que <<... podemos dar aplicación directa a la doctrina que contiene la sentencia del Tribunal de Justicia de 13 de marzo de 2014 y al amparo de la misma declarar que el contrato de profesor asociado del recurrente debe considerarse indeﬁnido>> y que <<Siendo el del recurrente un contrato indeﬁnido, la causa de terminación invocada por la Universidad para ponerle ﬁn, basada en su carácter temporal, no puede admitirse y, en coherencia, esa terminación sin causa ha de caliﬁcarse como despido >>. 3.- Por todo lo expuesto, y de conformidad con lo informado sobre este extremo por el Ministerio Fiscal, concurre el requisito o presupuesto de contradicción de sentencias exigido en el art. 219.1 LRJS ( El recurso tendrá por objeto la uniﬁcación de doctrina con ocasión de sentencias dictadas en suplicación por las Salas de lo Social de los Tribunales Superiores de Justicia, que fueran contradictorias entre sí, con la de otra u otras Salas de los referidos Tribunales Superiores o con sentencias del Tribunal Supremo, respecto de los mismos litigantes u otros diferentes en idéntica situación donde, en mérito a hechos, fundamentos y pretensiones sustancialmente iguales, se hubiere llegado a pronunciamientos distintos ) para viabilizar el recurso de casación uniﬁcadora, puesto que en ambos supuestos se trata de la sucesión de contratos temporales para cubrir necesidades de profesorado de las respectivas universidades, rigiéndose los supuestos de actuación empresarial por las especiﬁcidades establecidas en la Ley Orgánica de Universidades 6/2001, habiendo llegado a soluciones jurídicas contradictorias en orden a determinar si la necesidad docente cubierta por el trabajador tenía carácter indeﬁnido de no haber respetado la empleadora en la contratación las garantías de la normativa universitaria interpretada en la forma señalada por el TJUE en su sentencia de 13-03-2014 . CUARTO.- 1.- Procede entrar a conocer de la cuestión de fondo planteada por el trabajador recurrente, que invoca como infringida por la resolución impugnada la STJUE 13-03-2014 (asunto C-190/13 ), que interpreta la Directiva 1999/70/CE. 2.- Para una recta comprensión de la cuestión debatida, como destaca la STS/IV 22-06-2017 (rcud 3047/2015 ) en supuesto análogo, debe hacerse referencia los preceptos más relevantes de la normativa especíﬁca en materia de contratación en el ámbito de las universidades, entre otros: A) La Ley Orgánica 6/2001, de 21 de septiembre, de Universidades, en la redacción dada por la Ley Orgánica 4/2007, de 12 de abril: Artículo 48. Normas generales. 1. Las universidades podrán contratar personal docente e investigador en régimen laboral, a través de las modalidades de contratación laboral especíﬁcas del ámbito universitario que se regulan en esta Ley o mediante las modalidades previstas en el Estatuto de los Trabajadores para la sustitución de trabajadores con derecho a reserva del puesto de trabajo. También podrán contratar personal investigador, técnico u otro personal, a través del contrato de trabajo por obra o servicio determinado, para el desarrollo de proyectos de investigación cientíﬁca o técnica. Asimismo, las universidades podrán nombrar profesoras y profesores eméritos en las condiciones previstas en esta Ley. 2. Las modalidades de contratación laboral especíﬁcas del ámbito universitario son las que se corresponden con las ﬁguras de Ayudante, Profesor Ayudante Doctor, Profesor Contratado Doctor, Profesor Asociado y Profesor Visitante. El régimen de las indicadas modalidades de contratación laboral será el que se establece en esta Ley y en sus normas de desarrollo; supletoriamente, será de aplicación lo dispuesto en el texto refundido de la Ley del Estatuto de los Trabajadores, aprobado por Real Decreto Legislativo 1/1995, de 24 de marzo, y en sus normas de desarrollo . Artículo 53. Profesores asociados. La contratación de Profesoras y Profesores Asociados se ajustará a las siguientes reglas: a.- El contrato se podrá celebrar con especialistas de reconocida competencia que acrediten ejercer su actividad profesional fuera del ámbito académico universitario. b.- La ﬁnalidad del contrato será la de desarrollar tareas docentes a través de las que se aporten sus conocimientos y experiencia profesionales a la universidad. c.- El contrato será de carácter temporal y con dedicación a tiempo parcial. d.- La duración del contrato será trimestral, semestral o anual, y se podrá renovar por períodos de igual duración, siempre que se siga acreditando el ejercicio de la actividad profesional fuera del ámbito académico universitario. B) El Real Decreto 898/1985 de 30 de abril, sobre régimen del profesorado universitario (BOE 19-06-1985): Artículo 20. Profesores asociados 1- Las Universidades podrán contratar temporalmente, a tiempo completo o parcial, en las condiciones que establezcan sus Estatutos y dentro de sus previsiones presupuestarias, Profesores asociados, de entre especialistas de reconocida competencia que desarrollen normalmente su actividad profesional fuera de la Universidad. 2- A los efectos de lo dispuesto en el número anterior, se entenderá por desarrollo normal de actividad profesional el ejercicio, fuera del ámbito universitario, de cualquier actividad profesional remunerada de aquellas para las que capacite el título académico que el interesado posea durante un período mínimo de tres años dentro de los cinco anteriores a su contratación como profesor asociado por una Universidad. No obstante, lo dispuesto en el párrafo anterior y en los términos en los que, en su caso, prevean los estatutos, las universidades podrán contratar a personas de reconocida competencia. ..... 9- Los estatutos de las universidades establecerán la duración máxima de estos contratos, su carácter o no de renovables, las condiciones en que, en su caso, las sucesivas renovaciones puedan producirse y el número máximo de éstas. En cualquier caso, la renovación de los contratos de profesores asociados con dedicación a tiempo completo incluirá una prueba de evaluación externa, cuyos criterios generales serán establecidos en el Consejo de Universidades y desarrollados por la Administración pública competente . 3.- Por otra parte, en el Acuerdo marco sobre el trabajo de duración determinada , concluido el 18-03-1999, que ﬁgura en el anexo de la Directiva 1999/70/CE del Consejo, de 28 de junio de 1999, relativa al Acuerdo marco de la CES, la UNICE y el CEEP sobre el trabajo de duración determinada (DOCE 10-07-1999), ﬁgura en sus considerandos 6, 7 y 8, respectivamente, que los contratos de trabajo de duración indeﬁnida son la forma más común de relación laboral, y que contribuyen a la calidad de vida de los trabajadores afectados y a mejorar su rendimiento , que la utilización de contratos de trabajo de duración determinada basados en razones objetivas es una forma de evitar abusos y que los contratos de duración determinada son característicos del empleo en algunos sectores, ocupaciones y actividades y que pueden convenir tanto a los empresarios como a los trabajadores; y, además, en sus cláusulas 1 y 5 se establece: Objeto (cláusula 1).El objeto del presente Acuerdo marco es: a) mejorar la calidad del trabajo de duración determinada garantizando el respeto al principio de no discriminación; b) establecer un marco para evitar los abusos derivados de la utilización de sucesivos contratos o relaciones laborales de duración determinada . Medidas destinadas a evitar la utilización abusiva (cláusula 5) 1. A efectos de prevenir los abusos como consecuencia de la utilización sucesiva de contratos o relaciones laborales de duración determinada los Estados miembros, previa consulta con los interlocutores sociales y conforme a la legislación, los acuerdos colectivos y las prácticas nacionales, y/o los interlocutores sociales, cuando no existan medidas legales equivalentes para prevenir los abusos, introducirán de forma que se tengan en cuenta las necesidades de los distintos sectores y/o categorías de trabajadores, una o varias de las siguientes medidas: a) razones objetivas que justiﬁquen la renovación de tales contratos o relaciones laborales; b) la duración máxima total de los sucesivos contratos de trabajo o relaciones laborales de duración determinada; c) el número de renovaciones de tales contratos o relaciones laborales. 2. Los Estados miembros, previa consulta a los interlocutores sociales, y/o los interlocutores sociales, cuando resulte sea necesario, determinarán en qué condiciones los contratos de trabajo o relaciones laborales de duración determinada: a) se considerarán sucesivos; b) se considerarán celebrados por tiempo indeﬁnido . QUINTO .- 1.- En interpretación del referido Acuerdo marco sobre el trabajo de duración determinada en relación con los contratos de duración determinada celebrados con profesores asociados en España, la citada STJUE 13-03-2014 (asunto C-190/13 ), dando respuesta a la cuestión prejudicial planteada, se declara que: << La cláusula 5 del Acuerdo marco sobre el trabajo de duración determinada, concluido el 18 de marzo de 1999, que ﬁgura en el anexo de la Directiva 1999/70/CE del Consejo, de 28 de junio de 1999, relativa al Acuerdo marco de la CES, la UNICE y el CEEP sobre el trabajo de duración determinada, debe interpretarse en el sentido de que no se opone a una normativa nacional, como la controvertida en el litigio principal, que permite a las universidades renovar sucesivos contratos de duración determinada celebrados con profesores asociados, sin límite alguno en lo que atañe a la duración máxima y al número de prórrogas de dichos contratos, desde el momento en que tales contratos están justiﬁcados por una razón objetiva, en el sentido del apartado 1, letra a), de dicha cláusula, extremo que incumbe comprobar al Juzgado remitente. No obstante, incumbe también a dicho Juzgado comprobar concretamente que, en el litigio principal, la renovación de los sucesivos contratos laborales de duración determinada en cuestión trataba realmente de atender necesidades provisionales, y que una normativa como la controvertida en el litigio principal no se haya utilizado, de hecho, para cubrir necesidades permanentes y duraderas en materia de contratación de personal docente >>. 2.- Para llegar a tal conclusión en la referida sentencia se razona, entre otros extremos, que: A) La utilización sucesiva de tal tipo de contratos de trabajo de duración determinada ha de estar justiﬁcada por una razón objetiva <<... el concepto de razones objetivas se reﬁere a las circunstancias especíﬁcas y concretas que caracterizan una determinada actividad y que, por tanto, pueden justiﬁcar en ese contexto particular la utilización sucesiva de contratos de trabajo de duración determinada. Tales circunstancias pueden tener su origen, en particular, en la especial naturaleza de las tareas para cuya realización se celebran tales contratos y en las características inherentes a las mismas o, eventualmente, en la persecución de un objetivo legítimo de política social por parte de un Estado miembro (sentencias, antes citadas, Angelidaki y otro ... y jurisprudencia citada, y Kücük ...) >> (apartado 45); así como que el objetivo de tal forma de contratación temporal debe consistir en enriquecer la enseñanza universitaria, puesto que <<... estos contratos temporales permiten alcanzar el objetivo perseguido, que consiste en enriquecer la enseñanza universitaria en ámbitos especíﬁcos mediante la experiencia de especialistas reconocidos, dado que estos contratos permiten tener en cuenta la evolución tanto de las competencias de los interesados en los ámbitos de que se trate como de las necesidades de las universidades >> (apartado 50).. B) La contratación de profesores asociados debe responder efectivamente a una necesidad auténtica , dado que <<... una disposición legislativa o reglamentaria nacional que se limitara a autorizar de manera general y abstracta la utilización de sucesivos contratos de trabajo de duración determinada no se ajustaría a las exigencias que se han precisado en el anterior apartado de la presente sentencia (sentencias, antes citadas, Angelidaki y otros, ... y jurisprudencia citada, y Kücük, ... )>> (apartado 46); ya que << En efecto, una disposición de esta naturaleza, de carácter meramente formal, no permite deducir criterios objetivos y transparentes a ﬁn de veriﬁcar si la renovación de tales contratos responde efectivamente a una necesidad auténtica, si permite alcanzar el objetivo perseguido y si resulta indispensable a tal efecto. Por tanto, tal disposición entraña un riesgo real de dar lugar a una utilización abusiva de este tipo de contratos y, por ende, no es compatible ni con el objetivo ni con el efecto útil del Acuerdo marco (véanse, en este sentido, las sentencias, antes citadas, Angelidaki y otros,... y jurisprudencia citada, y Kücük ...) >> (apartado 47). C) La comprobación de que tal modalidad contractual responde efectivamente a una necesidad auténtica, por permitir alcanzar el objetivo perseguido y por resultar indispensable a tal efecto, es una obligación que incumbe realizar al juzgador remitente, dado que <<... sin perjuicio de las comprobaciones que incumbe al juzgado remitente realizar, ya que éste tiene competencia exclusiva para interpretar el Derecho nacional, dicha normativa establece las circunstancias precisas y concretas en las que los contratos de trabajo de duración determinada pueden celebrarse y renovarse para contratar profesores asociados y responde a una necesidad auténtica >> (apartado 49). D) Distingue entre necesidad permanente de las universidades y necesidad temporal en materia de contratación de profesores asociados, exigiendo en todo caso la concurrencia de una razón objetiva en los términos del Acuerdo marco sobre el trabajo de duración determinada , aﬁrmando que <<... las meras circunstancias de que los contratos de trabajo de duración determinada celebrados con profesores asociados se renueven para satisfacer una necesidad recurrente o permanente de las universidades en la materia y que tal necesidad no se pueda satisfacer mediante un contrato de trabajo de duración indeﬁnida no permiten excluir la existencia de una razón objetiva, en el sentido de la cláusula 5, apartado 1, del Acuerdo marco, dado que la naturaleza de la actividad docente en cuestión y las características inherentes a tal actividad pueden justiﬁcar, en el contexto de que se trate, el uso de contratos de trabajo de duración determinada>> y precisando que <<Aunque los contratos de trabajo de duración determinada celebrados con profesores asociados cubren una necesidad permanente de las universidades, en la medida en que el profesor asociado, en virtud de tal contrato de trabajo de duración determinada, ejecuta tareas bien deﬁnidas que forman parte de las actividades habituales de las universidades, no es menos cierto que la necesidad en materia de contratación de profesores asociados sigue siendo temporal, en la medida en que se considera que este profesor retomará su actividad profesional a tiempo completo cuando se extinga su contrato (véase, en este sentido, la sentencia Kücük, antes citada...)>> (apartado 57); E) Aﬁrmándose expresamente que dichos contratos de profesores asociados no pueden renovarse para el desempeño permanente y duradero, aun a tiempo parcial, de tareas docentes incluidas normalmente en la actividad del personal docente permanente, destacando que << En cambio, contratos de trabajo de duración determinada, como los controvertidos en el litigio principal, no pueden renovarse para el desempeño permanente y duradero, aun a tiempo parcial, de tareas docentes incluidas normalmente en la actividad del personal docente permanente>> (apartado 58); F) Especialmente, se ﬁjan las obligaciones del órgano judicial nacional para que se cumplan efectivamente las ﬁnalidades del Acuerdo marco sobre el trabajo de duración determinada , señalándose que <<En consecuencia, incumbe a todas las autoridades del Estado miembro interesado, incluidos los tribunales nacionales, garantizar, en el ejercicio de sus respectivas competencias, la observancia de la cláusula 5, apartado 1, letra a), del Acuerdo marco, comprobando concretamente que la renovación de sucesivos contratos o relaciones laborales de duración determinada con profesores asociados trata de atender a necesidades provisionales, y que una normativa como la controvertida en el litigio principal no se utilice, de hecho, para cubrir necesidades permanentes y duraderas de las universidades en materia de contratación de personal docente (véanse, por analogía, las sentencias, antes citadas, Angelidaki y otros ... y Kücük ...) >> (apartado 59); G) Concluyéndose, como se ha adelantado, que al juez nacional incumbe comprobar que tal contratación está justiﬁcada por una razón objetiva en los términos expuestos y que no se utilice, de hecho, para cubrir necesidades permanentes y duraderas en materia de contratación de personal docente, por lo que <<... la cláusula 5 del Acuerdo marco debe interpretarse en el sentido de que no se opone a una normativa nacional, como la controvertida en el litigio principal, que permite a las universidades renovar sucesivos contratos de duración determinada celebrados con profesores asociados, sin límite alguno en lo que atañe a la duración máxima y al número de prórrogas de dichos contratos, desde el momento en que tales contratos están justiﬁcados por una razón objetiva, en el sentido del apartado 1, letra a), de dicha cláusula, extremo que incumbe comprobar al Juzgado remitente. No obstante, incumbe también a dicho Juzgado comprobar concretamente que, en el litigio principal, la renovación de los sucesivos contratos laborales de duración determinada en cuestión trataba realmente de atender necesidades provisionales, y que una normativa como la controvertida en el litigio principal no se haya utilizado, de hecho, para cubrir necesidades permanentes y duraderas en materia de contratación de personal docente >> (apartado 60) ( STJUE 13-03-2014, asunto C-190/13 ). SEXTO.- De las expuestas normativas de la Unión Europea y de la española, así como de la jurisprudencia del TJUE (en especial, STJUE 14-09-2016 - asunto c-16/2015 -Pérez López y STJUE 13-03-2014 -asunto C-190/13 -Márquez Samohano), en su interpretación por esta Sala IV del Tribunal Supremo (en especial, STS/ IV 01-06-2017 -rcud 2890/2015 y STS/IV 22-06-2017 -rcud 3047/2015 ), cabe deducir que: A) La regla general es la de la contratación laboral por tiempo indeﬁnido, ya que << Tanto en el ámbito de las relaciones laborales entre privados como en el de las que se producen con las administraciones públicas la regla general es el de la ﬁjeza de las relaciones laborales, esto es, la de que los contratos de trabajo se entienden celebrados por tiempo indeﬁnido salvo que expresamente se pacte su duración temporal, lo que sólo podrá hacerse en los supuestos de contratación temporal previstos por la ley >>, lo que es dable deducir, como se razona en la citada STS/IV 01-06-2017 , del Preámbulo del citado Acuerdo Marco y de sus cláusulas 3 a 5 en su interpretación, entre otras, por la STJUE 14-09-2016 ( asunto c-16/2015 -Pérez López) (STS/IV 01-06-2017 ). B) La contratación temporal de profesorado universitario asociado debe cumplir los presupuestos normativos que legitiman tal modalidad contractual, dado que << El artículo 48 de la de la Ley Orgánica 6/2001, de Universidades, de 21 de diciembre ..., en su versión modiﬁcada por la Ley Orgánica nº 7/2007, de 12 de abril ... establece, en líneas generales, que el régimen jurídico aplicable al personal docente e investigador de las universidades contratado laboralmente viene dado, de una parte, por las previsiones contenidas en dicha Ley y en su normativa de desarrollo, aplicándose con carácter supletorio lo dispuesto en el ET y demás normativa laboral; y, de otra, por lo establecido en la normativa autonómica, habida cuenta de la remisión que en los términos de la presente Ley y en el marco de sus competencias se efectúa en favor de las Comunidades Autónomas>>, que <<... la modalidad de profesor asociado, con independencia de las diferentes regulaciones y regímenes jurídicos ... ha estado siempre vinculada a profesionales de reconocido prestigio. Con su formalización se pretende incorporar al mundo universitario a tales profesionales para puedan aportar la experiencia y conocimientos adquiridos en su actividad profesional diaria. Siendo esto así, no sólo se deberá acreditar el desempeño de una actividad profesional distinta a la universitaria, sino también, que ésta guarde relación directa con las actividades docentes ﬁjadas en la convocatoria y que, a su vez, se haya desempeñado durante un lapso de tiempo más o menos amplio que le conﬁera al candidato la condición de profesional de reconocido prestigio>> ; así como que << En buena lógica, el contrato será de carácter temporal y con dedicación a tiempo parcial, siendo renovable mientras se mantenga el presupuesto que legitima esta contratación, esto es, se siga desempeñando la actividad profesional fuera del ámbito académico universitario >>; pero que << Obviamente, cuando no se cumplen los presupuestos que legitiman este tipo de contratación, así como cuando la actividad docente desempeñada está absolutamente desvinculada de la actividad profesional que desempeña el docente fuera de la Universidad se desvirtúa la esencia de esta modalidad contractual >>; así como, en deﬁnitiva, y poniendo esencialmente el acento en las razones ligadas a la necesaria relación entre la realidad práctica y profesional del contratado temporal con la formación de los alumnos aun siendo una necesidad permanente, que << en el ámbito de la docencia universitaria la contratación temporal es posible en los supuestos previstos en la ley, incluso para atender necesidades permanentes, siempre que tales contrataciones respondan a los ﬁnes e intereses protegidos por la norma legal que habilita la correspondiente contratación temporal, bien sea por razones ligadas a la necesaria relación entre la realidad práctica y profesional con la formación de los alumnos, bien a exigencias conectadas a la promoción y formación del docente, o a cualquier otra ﬁnalidad legalmente establecida >> ( STS/ IV 01-06-2017 ). C) La causa de temporalidad debe aparecer debidamente justiﬁcada por causas que no sean ajenas a las propias de la ﬁgura del profesor asociado, no siendo posible cubrir necesidades permanentes de la Universidad recurriendo a la contratación de profesores asociados, partiendo también de la supletoriedad del Estatuto de los Trabajadores como establece el art. 48 Ley Orgánica de Universidades , dado que << Cuando no se cumplen los presupuestos que legitiman este tipo de contratación, así como cuando la actividad docente desempeñada está absolutamente desvinculada de la actividad profesional que desempeña el docente fuera de la Universidad se desvirtúa la esencia de esta modalidad contractual >> y que << la contratación temporal, aun considerando las peculiares características y regulación que presenta en el ámbito de las Universidades Públicas, ha de respetar la legislación laboral y en el aspecto que ahora interesa, lo dispuesto en el artículo 15 del ET , es decir, que la causa de la temporalidad aparezca debidamente justiﬁcada, no siendo posible cubrir necesidades permanentes de la Universidad recurriendo a la contratación de profesores asociados. No puede haber ningún espacio exento, ni por lo tanto tampoco el ámbito universitario, de la obligación de cumplimiento de la normativa de la Unión Europea y de la regulación española >> ( STS/IV 22-06-2017 -rcud 3047/2015 ). D) En cuanto a los presupuestos legitimadores, se señala en la citada sentencia que << En deﬁnitiva, los dos requisitos exigidos, tanto por la regulación estatutaria como por la normativa de la Unión Europea, y la jurisprudencia que la interpreta, en especial la STJUE de 13 de marzo de 2014, asunto C-190/13 , son: a) Que el contratado como profesor asociado desarrolle una actividad profesional fuera de la Universidad. b) Que el contrato de profesor asociado no cubra necesidades permanentes y duraderas de la Universidad >> ( STS/IV 22-06-2017 -rcud 3047/2015 ). E) El examen de los presupuestos de dicha contratación temporal ha de efectuarse en cada supuesto concreto, puesto que <<... hemos de partir de la aﬁrmación de que el Profesor asociado siempre va a cubrir una enseñanza necesaria y permanente del centro docente, en el ámbito de la formación teórica y práctica, conducente a la obtención de los títulos universitarios. Se hace necesario, pues, examinar si, en cada supuesto en concreto, las circunstancias concurrentes permiten sostener que, en deﬁnitiva, la contratación bajo tal modalidad no se ajusta a aquella ﬁnalidad y, al estar desvirtuada, se aleja de su justiﬁcación objetiva y, por ende, ha de ser considerada fraudulenta >> ( STS/IV 15-02-2018 -rcud 1089/2016 ). SÉPTIMO.- Por otra parte, la jurisprudencia de esta Sala de casación con relación a las diversas modalidades de contratación temporal y la prueba de si responde a la causa establecida por el legislador, en especial sobre la contratación temporal por obra o servicio determinado regulada en el art. 15 ET , -- el que se hace ahora especial referencia dada la aplicación supletoria de la normativa laboral ex art. 48 Ley Orgánica de Universidades --, ha interpretado, entre otros extremos, que: A) Para su validez no basta con la caliﬁcación formal de temporalidad que conste en el contrato, sino que tiene que cumplir inexorablemente todos los requisitos y exigencias que la Ley impone a tal modalidad de contratación temporal, aﬁrmando que << con carácter general, para que un contrato sea verdaderamente temporal o de duración determinada, no basta con la expresión en el texto del mismo de tal carácter temporal y la duración concreta que se le asigna, sino que tiene que cumplir inexorablemente todos los requisitos y exigencias que la Ley impone >> y que << en supuestos como el presente no puede bastar con alegar que la relación laboral, mantenida ininterrumpidamente y sin alteración alguna a lo largo de más de 14 años, estaba ligada a las vicisitudes de la contrata y, a la vez, pretender que es ésa una circunstancia de delimitación temporal del vínculo >> (entre otras, STS/IV Pleno 19-07-2018 -rcud 823/2017 ). B) En cuanto a la carga de la prueba de la causa que justiﬁca la contratación temporal se aﬁrma que incumbe a la empresa, e incluso en un supuesto afectante a una Universidad pública se establece que <<... eso no obsta a que sea la empleadora la que tiene la carga de probar que la contratación efectivamente obedecía a una situación puramente coyuntural y transitoria, derivada de la ejecución de un especiﬁco proyecto de investigación que pudiere caliﬁcarse como obra determinada a los efectos de avalar la eﬁcacia jurídica del contrato temporal>> ( STS/IV 11-04-2018 -rcud 540/2016 ). OCTAVO.- 1.- Por todo lo expuesto, resulta que, -- aunque la normativa española permita a las universidades renovar sucesivos contratos de duración determinada celebrados con profesores asociados, sin límite alguno en lo que atañe a la duración máxima (cláusula 5, apartado 1, letra b Acuerdo marco) y al número de prórrogas de dichos contratos (cláusula 5, apartado 1, letra c Acuerdo marco) --, a los juzgados y tribunales competentes, a los efectos de prevenir los abusos como consecuencia de la utilización sucesiva de contratos o relaciones laborales de duración determinada, les incumbe comprobar que existen razones objetivas que justiﬁquen la renovación de tales contratos o relaciones laborales, en el sentido de la cláusula 5, apartado 1, letra a), del citado Acuerdo marco; así como también dicho Juzgado o Tribunal debe comprobar, en el caso concreto, que con la renovación de los sucesivos contratos laborales de duración determinada de profesor asociado se trata realmente de cumplir con las ﬁnalidades exigibles legalmente (en especial, desarrollar tareas docentes a través de las que se aporten sus conocimientos y experiencias profesionales a la universidad ), y que la normativa para la contratación universitaria española no se haya utilizado, de hecho, para cubrir necesidades permanentes y duraderas en materia de contratación de personal docente, no pudiendo aplicarse dicha normativa, -- como establece la citada STJUE 13-03-2014 --, para lograr el desempeño permanente y duradero, aun a tiempo parcial, de tareas docentes incluidas normalmente en la actividad del personal docente permanente . 2.- Los términos imperativos en que aparece redactada la citada STJUE 13-03-2014 (asunto C-190/13 ) sobre las obligaciones de comprobación que se imponen a los juzgados y tribunales de los Estados miembros en interpretación de la cláusula 5 del Acuerdo marco sobre el trabajo de duración determinada en la que se contienen las medidas destinadas a prevenir y evitar los abusos como consecuencia de la utilización sucesiva de contratos o relaciones laborales de duración determinada en los Estados miembros, así como la regla general de que la contracción laboral es por tiempo indeﬁnido salvo los supuestos excepcionales legalmente previstos, obliga a entender que dichos Juzgados o Tribunales no pueden limitarse formalmente a dar por válidos los referidos contratos temporales de profesor asociado sino que deben analizar si reúnen los presupuestos exigidos en la normativa estatal y en la de la Unión Europea para celebrar y renovar el contrato y que en su desarrollo responde a la ﬁnalidad legalmente exigible; pudiendo concluirse que la carga de la prueba de la existencia de dichos presupuestos y el cumplimiento de su ﬁnalidad incumbe a la Universidad contratante, al igual que se ha declarado jurisprudencialmente respecto a los contratos temporales ordinarios en interpretación del art. 15 ET (de aplicación supletoria ex art. 48 Ley Orgánica de Universidades ) sobre la necesidad de acreditar la causa justiﬁcativa de la temporalidad ante la regla general del carácter indeﬁnido de los contratos y la excepcionalidad de la contratación temporal, así como también se deduce del principio de la mayor facilidad probatoria contenido en el art. 217.7 de la supletoria Ley de Enjuiciamiento Civil . NOVENO.- 1.- En el supuesto ahora enjuiciado, como se ha adelantado, el trabajador demandante prestó servicios para la Universidad demandada, con la categoría profesional de Profesor Asociado, sin interrupción desde el 04-10-2002, en virtud de contrato de trabajo a tiempo parcial (6 horas semanales), siendo prorrogado dicho contrato anualmente coincidiendo con los sucesivos cursos académicos; así como que fue cesado por la empleadora mediante comunicación de 09-07-2014 y efectos de 15-09-2014, por alegada terminación de contrato y tras haber informado en el sentido de no favorable para su continuidad el Consejo de Departamento; ﬁgurando, además expresamente, como hecho declarado probado, que el motivo del cese viene relacionado con el hecho de que la asignatura que el demandante creó y que ha impartido durante los últimos 11 años la da ahora Catedrático del Departamento . 2.- Es decir, que durante prácticamente doce años el trabajador recurrente, con renovaciones anuales, ha prestado servicios a tiempo parcial contratado formalmente como profesor asociado impartiendo clases en una concreta asignatura, la que se indica que fue el propio demandante la persona que la creó y se aﬁrma que la causa determinante y real del cese acordado por la Universidad empleadora fue la de que esta entidad decidió que dicha asignatura en el curso académico que se iniciaba en septiembre del año 2014 la pasara a impartir el Catedrático del Departamento. 3.- En el presente caso, la Universidad demandada, cuya carga de la prueba le incumbía, debía haber acreditado que se cumplían los presupuestos que legitiman este tipo de contratación, en especial, que el contratado como profesor asociado había desempeñado durante todo el tiempo de la contratación una actividad profesional distinta a la universitaria, así como también, que ésta guardaba relación directa con las actividades docentes ﬁjadas en la convocatoria y que, a su vez, se había desempeñado durante un lapso de tiempo más o menos amplio que conﬁera al candidato la condición de profesional de reconocido prestigio . 4.- Por lo que, -- visto, además, el escueto contrato inicial suscrito entre las partes sin referencia a tales presupuestos, al que se remiten los HPs de la sentencia --, al no constar haberse cumplido todos y cada uno de los presupuestos básicos que legitiman este tipo de contratación temporal, ello bastaría por si solo para concluir que la contratación temporal impugnada era fraudulenta y que el cese acordado por la empresa constituía un despido improcedente. En este sentido, se reitera la doctrina establecida en nuestras SSTS/IV 01-06-2017 (rcud 2890/2015), 22-06-2017 ( rcud 3047/2015) y 15-02-2018 ( rcud 1089/2016 ) en relación con la STJUE 13-03-2014 (asunto C-190/13 ). 5.- Además, en el presente caso, cumpliendo las exigencias de la citada STJUC 13-03-2014, debe seguirse comprobando judicialmente sí la renovación de los sucesivos contratos temporales se ha utilizado o no de hecho para cubrir necesidades permanentes y duraderas en materia de contratación de personal docente , concepto distinto de las posibles necesidades permanentes de la docencia universitaria. 6.- Debiendo concluirse, a la vista de los hechos declarados probados, que si la ﬁnalización del contrato temporal se ha fundamentado en que la asignatura la pasaba a impartir el catedrático del departamento era porque en realidad el contratado temporal como profesor asociado estaba de hecho sustituyendo al referido catedrático actuando como un verdadero profesor sustituto , lo que no constituye la función ni la ﬁnalidad de la contratación temporal de los profesores asociados (en especial, desarrollar tareas docentes a través de las que se aporten sus conocimientos y experiencias profesionales a la universidad ), puesto que, aunque se tratara de posibles necesidades permanentes de la docencia universitaria, la temporalidad debe ir unida a razones ligadas a la necesaria relación entre la realidad práctica y profesional con la formación de los alumnos, bien a exigencias conectadas a la promoción y formación del docente, o a cualquier otra ﬁnalidad legalmente establecida , lo que tampoco se justiﬁca acontezca en el caso enjuiciado; evidenciándose la utilización de hecho de la contratación temporal sucesiva para cubrir necesidades permanentes y duraderas en materia de contratación de personal docente, al habérsele encomendado al demandante el desempeño permanente y duradero, aun a tiempo parcial, de tareas docentes incluidas normalmente en la actividad del personal docente permanente , incumbiendo también al Tribunal sentenciador comprobar que una normativa como la controvertida en el litigio principal no se haya utilizado, de hecho, para cubrir necesidades permanentes y duraderas en materia de contratación de personal docente . 7.- Procede, por lo expuesto y de conformidad con lo informado por el Ministerio Fiscal, estimar el recurso de casación para la uniﬁcación de doctrina interpuesto por el trabajador demandante, resolver el debate en suplicación, desestimando el de tal clase interpuesto por la Universidad empleadora y conﬁrmar la sentencia del Juzgado de lo Social; sin costas ( art. 235 LRJS ). F A L L O Por todo lo expuesto, en nombre del Rey y por la autoridad que le conﬁere la Constitución, esta Sala ha decidido : 1.- Estimar el recurso de casación para la uniﬁcación de doctrina interpuesto por Don Clemente . 2.- Casar y anular la sentencia dictada el 14-marzo-2016 por la Sala de lo Social del Tribunal Superior de Justicia de Murcia, en recurso de suplicación nº 384/2015 , interpuesto contra la sentencia de fecha 30-enero-2015, dictada por el Juzgado de lo Social nº 2 de Cartagena , en autos nº 635/2014, seguidos a instancia de Don Clemente contra la Universidad Politécnica de Cartagena (UPCT). 3.- Resolver el debate en suplicación, desestimando el de tal clase y conﬁrmar la referida sentencia del Juzgado de lo Social núm. 2 de Cartagena. 4.- No efectuar pronunciamiento sobre costas. Notifíquese esta resolución a las partes e insértese en la colección legislativa. Así se acuerda y ﬁrma. D. Jesus Gullon Rodriguez D. Fernando Salinas Molina Dª Maria Milagros Calvo Ibarlucea Dª Maria Luisa Segoviano Astaburuaga D. Jose Manuel Lopez Garcia de la Serrana Dª Rosa Maria Viroles Piñol Dª Maria Lourdes Arastey Sahun D. Miguel Angel Luelmo Millan D. Antonio V. Sempere Navarro D. Angel Blasco Pellicer D. Sebastian Moralo Gallego Dª Maria Luz Garcia Paredes Dª Concepcion Rosario Ureste Garcia"
    doc = nlp(test_text)
    # print("Entities in '%s'" % test_text)
    print(f"Entidades encontradas en el texto: {doc.ents}\n")
    print(f"ENTITY -> LABEL")
    for ent in doc.ents:
        print(f"{ent.label_} -> {ent.text}")

    # save model to output directory
    if output_dir is not None:
        output_dir = Path(output_dir)
        if not output_dir.exists():
            output_dir.mkdir()
        nlp.to_disk(output_dir)
        print("Saved model to", output_dir)

        # test the saved model
        print("Loading from", output_dir)
        nlp2 = spacy.load(output_dir)
        for text, _ in TRAIN_DATA:
            doc = nlp2(text)
            # print("Entities", [(ent.text, ent.label_) for ent in doc.ents])
            # print("Tokens", [(t.text, t.ent_type_, t.ent_iob) for t in doc])


if __name__ == "__main__":
    plac.call(main)